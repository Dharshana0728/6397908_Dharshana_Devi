SET SERVEROUTPUT ON;

DECLARE
  CURSOR UpdateLoanInterestRates IS
    SELECT LoanID, InterestRate FROM Loans;

  rec_loan UpdateLoanInterestRates%ROWTYPE;
BEGIN
  DBMS_OUTPUT.PUT_LINE('--- Updating Loan Interest Rates ---');

  OPEN UpdateLoanInterestRates;
  LOOP
    FETCH UpdateLoanInterestRates INTO rec_loan;
    EXIT WHEN UpdateLoanInterestRates%NOTFOUND;

    UPDATE Loans
    SET InterestRate = InterestRate + 0.5
    WHERE LoanID = rec_loan.LoanID;

    DBMS_OUTPUT.PUT_LINE('Loan ' || rec_loan.LoanID || ': Interest rate updated from ' || rec_loan.InterestRate || '% to ' || TO_CHAR(rec_loan.InterestRate + 0.5, 'FM9999990.00') || '%');
  END LOOP;
  CLOSE UpdateLoanInterestRates;

  COMMIT;
END;
/
